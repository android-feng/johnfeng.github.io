<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[John Feng's Blog]]></title>
  <link href="http://johnfeng.github.io/atom.xml" rel="self"/>
  <link href="http://johnfeng.github.io/"/>
  <updated>2015-02-25T18:05:18+08:00</updated>
  <id>http://johnfeng.github.io/</id>
  <author>
    <name><![CDATA[Guangwei Feng]]></name>
    <email><![CDATA[fengguangwei.007@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Weibo Android SDK 3.0.1 Load libweibosdkcore.so Crash]]></title>
    <link href="http://johnfeng.github.io/blog/2015/02/25/weibo-android-sdk-3-dot-0-1-load-so-crash/"/>
    <updated>2015-02-25T16:51:47+08:00</updated>
    <id>http://johnfeng.github.io/blog/2015/02/25/weibo-android-sdk-3-dot-0-1-load-so-crash</id>
    <content type="html"><![CDATA[<hr>

<h2 id="question">Question</h2>

<p>I was trying to update my App&rsquo;s Weibo-SDK version from 2.x to 3.0.1 <em>(in order to fix the SSO crash when authorizing apps without Weibo&rsquo;s client, happens on **Lollipop</em><em>)</em>, building process failed with log : Couldn&rsquo;t load sdk from loader dalvik &hellip; <strong>libweibosdkcore.so</strong> file.</p>

<p>After pasting the &ldquo;libweibosdkcore.so&rdquo; file into &ldquo;libs/armeabi-v7a/&rdquo; folder, gradle still could not pass the building process.</p>

<h2 id="fix">Fix</h2>

<p>Add the following codes into the &ldquo;build.gradle&rdquo; file, inside of  the &ldquo;android&rdquo; block:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">    //noinspection all
    task copyNativeLibs(type: Copy) {
        // third party lib so                
        from(new File(projectDir, &#39;libs&#39;)) { include &#39;armeabi/*.so&#39;,&#39;armeabi-v7a/*.so&#39; }        
        into new File(buildDir, &#39;native-libs&#39;)
    }
    tasks.withType(JavaCompile) {
        compileTask -&gt;
            //noinspection all
            compileTask.dependsOn copyNativeLibs
    }

    //noinspection all
    tasks.withType(com.android.build.gradle.tasks.PackageApplication) {
        pkgTask -&gt;
            pkgTask.jniFolders = new HashSet()
            pkgTask.jniFolders.add(new File(buildDir, &#39;native-libs&#39;))
    }
</code></pre></div>
<p>Problem Solved.</p>

<p>From <a href="http://blog.sina.com.cn/s/blog_92814aa60102vhv1.html">镕羽&rsquo;s Blog</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hello World]]></title>
    <link href="http://johnfeng.github.io/blog/2015/02/16/hello-world/"/>
    <updated>2015-02-16T23:22:27+08:00</updated>
    <id>http://johnfeng.github.io/blog/2015/02/16/hello-world</id>
    <content type="html"><![CDATA[<h1 id="hello-world-my-blog">Hello World My Blog</h1>
]]></content>
  </entry>
  
</feed>
